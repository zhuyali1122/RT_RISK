# 风控数据查询 - 表结构说明

数据查询功能依赖 PostgreSQL 数据库，请在 `config/query_schema.json` 中根据实际表结构调整映射。

## 一、单个 Loan 查询

### 1. 表 `loans`（Loan 状态）

| 字段 | 说明 |
|------|------|
| loan_id | Loan 唯一标识 |
| status | 当前状态 |
| disbursement_date | 放款日期 |
| principal | 本金 |
| currency | 币种 |
| outstanding_balance | 未偿余额 |
| overdue_days | 逾期天数 |

### 2. 表 `loan_repayment_schedule`（还款计划）

| 字段 | 说明 |
|------|------|
| loan_id | 关联 Loan |
| period_no | 期数 |
| due_date | 应还日期 |
| principal_due | 应还本金 |
| interest_due | 应还利息 |
| total_due | 应还总额 |
| status | 状态 |
| paid_date | 实际还款日 |
| paid_amount | 实际还款额 |

### 3. 表 `loan_repayment_history`（还款记录）

| 字段 | 说明 |
|------|------|
| loan_id | 关联 Loan |
| payment_date | 还款日期 |
| amount | 还款金额 |
| principal_paid | 本金 |
| interest_paid | 利息 |
| payment_status | 状态 |
| transaction_id | 交易 ID |

## 二、按日新增放款查询

从 `loans` 表按 `disbursement_date` 筛选当日放款，或使用独立的 `disbursements` 表（需在 query_schema.json 中配置）。

## 三、配置调整

编辑 `config/query_schema.json`，将 `table`、`columns` 等改为实际数据库中的表名和字段名。
